<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Evaluación de Estadística - Ítem 2</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #040b18;
      --bg-soft: #0c162c;
      --bg-panel: #111e38;
      --card: #152446;
      --text: #f1f5ff;
      --muted: #8ba1c9;
      --accent: #49b4ff;
      --accent-2: #7c7dff;
      --accent-3: #3bf4ff;
      --border: rgba(255, 255, 255, 0.08);
      --shadow-strong: 0 35px 65px rgba(2, 6, 15, 0.65);
      --shadow-soft: 0 25px 45px rgba(12, 21, 40, 0.55);
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at 25% 20%, rgba(73, 180, 255, 0.35), transparent 45%),
                  radial-gradient(circle at 80% 10%, rgba(124, 125, 255, 0.25), transparent 40%),
                  var(--bg);
      color: var(--text);
      line-height: 1.7;
      min-height: 100vh;
    }

    header {
      padding: 3.5rem 1.5rem 2.5rem;
      position: relative;
      overflow: hidden;
    }

    header::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top, rgba(255, 255, 255, 0.08), transparent 65%);
      pointer-events: none;
    }

    .hero {
      max-width: 1280px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2.25rem;
      position: relative;
      z-index: 1;
    }

    .hero-copy h1 {
      margin: 0;
      font-family: "Space Grotesk", sans-serif;
      font-size: clamp(2.5rem, 4vw, 3.8rem);
      letter-spacing: -0.02em;
    }

    .hero-copy p {
      margin: 1rem 0 0;
      color: var(--muted);
      font-size: 1.11rem;
      max-width: 520px;
    }

    .hero-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.35rem 1rem;
      border-radius: 999px;
      border: 1px solid rgba(73, 180, 255, 0.4);
      background: rgba(73, 180, 255, 0.15);
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.25em;
      font-size: 0.78rem;
      margin-bottom: 1.2rem;
    }



    nav {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(18px);
      background: rgba(4, 11, 24, 0.85);
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    nav ul {
      list-style: none;
      margin: 0;
      padding: 0.9rem 1.5rem;
      display: flex;
      justify-content: center;
      gap: clamp(1.2rem, 10vw, 4rem);
      flex-wrap: wrap;
    }

    nav a {
      text-decoration: none;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.2em;
      font-size: 0.85rem;
      border-bottom: 2px solid transparent;
      padding-bottom: 0.2rem;
      transition: color 0.2s ease, border-color 0.2s ease;
    }

    nav a:hover,
    nav a:focus {
      color: var(--accent-3);
      border-color: var(--accent-3);
    }

    main {
      max-width: 1280px;
      margin: 0 auto;
      padding: 3rem 1.5rem 5rem;
      display: flex;
      flex-direction: column;
      gap: 3rem;
    }

    section {
      background: rgba(10, 18, 36, 0.85);
      border-radius: 30px;
      padding: clamp(1.8rem, 3vw, 2.6rem);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    section::before {
      content: "";
      position: absolute;
      inset: 0;
      opacity: 0.35;
      background: radial-gradient(circle at 20% 20%, rgba(73, 180, 255, 0.3), transparent 45%),
                  radial-gradient(circle at 80% 0%, rgba(124, 125, 255, 0.25), transparent 45%);
      pointer-events: none;
    }

    section > * {
      position: relative;
      z-index: 1;
    }

    .section-heading {
      margin-bottom: 1.6rem;
    }

    .section-heading span {
      color: var(--accent);
      letter-spacing: 0.3em;
      text-transform: uppercase;
      font-size: 0.8rem;
    }

    section h2 {
      margin: 0.4rem 0 0;
      font-family: "Space Grotesk", sans-serif;
      font-size: clamp(1.8rem, 3vw, 2.5rem);
    }

    .section-heading p {
      margin: 0.7rem 0 0;
      color: var(--muted);
      max-width: 720px;
    }

    .enunciado {
      border-radius: 24px;
      padding: 1.8rem;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(8, 13, 28, 0.9);
      font-weight: 500;
    }

    .questions-label {
      text-transform: uppercase;
      letter-spacing: 0.35em;
      color: var(--accent);
      font-size: 0.78rem;
      margin-bottom: 1rem;
    }

    .questions-grid {
      display: grid;
      gap: 1rem;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .question-card {
      border-radius: 18px;
      padding: 1.2rem 1.3rem;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: linear-gradient(135deg, rgba(73, 180, 255, 0.2), rgba(17, 29, 58, 0.8));
      display: flex;
      gap: 1rem;
      align-items: flex-start;
    }

    .question-card span {
      font-family: "Space Grotesk", sans-serif;
      font-size: 1.7rem;
      color: var(--accent-3);
      letter-spacing: 0.15em;
      min-width: 50px;
    }

    .respuestas-grid {
      display: grid;
      gap: 1.5rem;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    }

    .respuesta-card {
      padding: 1.75rem;
      border-radius: 24px;
      background: linear-gradient(140deg, rgba(73, 180, 255, 0.16), rgba(59, 244, 255, 0.08));
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 25px 60px rgba(0, 0, 0, 0.55);
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
    }

    .respuesta-card h3 {
      margin: 0;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      font-size: 0.9rem;
      color: var(--accent-3);
    }

    .respuesta-highlight {
      padding: 1rem;
      border-left: 4px solid var(--accent);
      background: rgba(7, 15, 30, 0.75);
      border-radius: 12px;
      color: var(--muted);
      font-size: 0.95rem;
    }

    .data-toggle {
      display: inline-flex;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      overflow: hidden;
      margin-bottom: 1.5rem;
    }

    .data-toggle button {
      background: transparent;
      border: none;
      color: var(--muted);
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      padding: 0.7rem 1.8rem;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .data-toggle button.active {
      background: linear-gradient(135deg, rgba(73, 180, 255, 0.4), rgba(124, 125, 255, 0.3));
      color: var(--text);
    }

    .data-pane {
      display: none;
    }

    .data-pane.active {
      display: block;
    }

    .tablas {
      display: grid;
      gap: 1.5rem;
    }

    .tabla-wrapper {
      background: rgba(7, 12, 24, 0.85);
      border-radius: 24px;
      padding: 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: inset 0 0 35px rgba(73, 180, 255, 0.06);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 18px;
      overflow: hidden;
      font-size: 0.98rem;
    }

    caption {
      caption-side: top;
      text-transform: uppercase;
      letter-spacing: 0.25em;
      color: var(--accent);
      font-size: 0.8rem;
      margin-bottom: 0.65rem;
    }

    thead {
      background: rgba(73, 180, 255, 0.22);
    }

    th, td {
      padding: 0.9rem 1rem;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }

    tbody tr:last-child td {
      border-bottom: none;
    }

    th {
      font-weight: 600;
    }

    .footnote {
      color: var(--muted);
      font-size: 0.9rem;
      margin-top: 0.7rem;
    }

    .viz-studio {
      display: grid;
      gap: 1.5rem;
    }

    .chart-grid {
      display: grid;
      gap: 1.8rem;
      grid-template-columns: 1fr;
    }

    .chart-card {
      padding: 1.7rem;
      border-radius: 28px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: radial-gradient(circle at top, rgba(73, 180, 255, 0.2), rgba(4, 8, 18, 0.9));
      box-shadow: var(--shadow-strong);
    }

    .chart-card h4 {
      margin: 0 0 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      font-size: 0.95rem;
    }

    .chart-card p {
      margin: 0 0 1rem;
      color: var(--muted);
      font-size: 0.94rem;
    }

    canvas {
      width: 100% !important;
      height: 450px !important;
    }

    footer {
      text-align: center;
      padding: 2.5rem 1rem 3rem;
      color: var(--muted);
      letter-spacing: 0.25em;
      text-transform: uppercase;
    }

    @media (max-width: 640px) {
      .hero-meta {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      }
      canvas {
        height: 320px !important;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="hero">
      <div class="hero-copy">
        <span class="hero-pill">Región de Magallanes</span>
        <h1>Evaluación de Estadística</h1>
      </div>
    </div>
  </header>

  <nav>
    <ul>
      <li><a href="#enunciado">Enunciado</a></li>
      <li><a href="#respuestas">Respuestas</a></li>
      <li><a href="#datos">Datos y gráficos</a></li>
    </ul>
  </nav>

  <main>
    <section id="enunciado">
      <div class="section-heading">
        <span>01 · Contexto</span>
        <h2>Enunciado del Ítem 2</h2>
        <p>Base textual del ejercicio, necesaria para comprender las preguntas y criterios de análisis sobre aranceles y tipos de institución.</p>
      </div>
      <div class="enunciado">
        <p class="questions-label">Preguntas guía</p>
        <div class="questions-grid">
          <article class="question-card">
            <span>01</span>
            <p>¿Hay áreas del conocimiento donde las carreras sean más caras? Expliquen qué criterio diseñaron para responder la pregunta.</p>
          </article>
          <article class="question-card">
            <span>02</span>
            <p>¿Qué influencia tiene la edad en el tipo de institución a la que ingresan los estudiantes?</p>
          </article>
          <article class="question-card">
            <span>03</span>
            <p>¿Hay carreras cuyo arancel sea sustantivamente más caro que la mayoría de los aranceles? ¿Qué explicación pueden encontrar? Consideren qué variables de la base de datos los puede ayudar y el contexto de la región que les tocó trabajar.</p>
          </article>
        </div>
      </div>
    </section>

    <section id="respuestas">
      <div class="section-heading">
        <span>02 · Hallazgos</span>
        <h2>Respuestas desarrolladas</h2>
        <p>Argumentos completos tal como los desarrollamos durante el análisis grupal.</p>
      </div>
      <div class="respuestas-grid">
        <article class="respuesta-card">
          <h3>PREGUNTA 1</h3>
          <div class="respuesta-highlight">Áreas con aranceles más altos: Salud, Ingeniería/Arquitectura, Tecnología, Derecho, Arte y Arquitectura y Ciencias Básicas.</div>
          <p>“Sí. Dentro de la base de datos analizada, existen áreas del conocimiento donde los aranceles son claramente más altos que en la mayoría de los programas. Entre las áreas más costosas se encuentran Salud, Ingeniería/Arquitectura y Tecnología. Estas áreas presentan valores de arancel que superan ampliamente el promedio general de la región.</p>
          <p>Para responder esta pregunta utilizamos un criterio estadístico y comparativo. Agrupamos la variable ‘Valor Arancel’ según Área de Conocimiento y analizamos medidas como la media, mediana, moda, percentiles (P75 y P90), así como el rango y la dispersión de los valores. Con este análisis fue posible identificar qué áreas concentran los aranceles más altos.</p>
          <p>La evidencia muestra que estas áreas requieren infraestructura especializada como laboratorios, talleres, equipamiento clínico, softwares técnicos y materiales de alto costo. Además, suelen tener estándares académicos estrictos y demanda de docentes con alta especialización, lo cual incrementa los costos operativos. Por estas razones, Salud, Ingeniería y Tecnología aparecen consistentemente como las áreas más caras dentro de la región de Magallanes.</p>
          <p>Las áreas donde las carreras son más caras son principalmente Derecho, Salud, Arte y Arquitectura y Ciencias Básicas. Esto se demuestra en los gráficos de costo promedio y en la distribución de aranceles. Las medias superan los $3.3 a $4.1 millones, lo que es considerablemente superior al promedio general regional (~$2.7 millones). Además, el boxplot evidencia una mayor variabilidad y presencia de aranceles máximos elevados en estas áreas, confirmando que requieren más recursos, infraestructura especializada y docentes altamente calificados.”</p>
        </article>

        <article class="respuesta-card">
          <h3>PREGUNTA 2</h3>
          <div class="respuesta-highlight">Jóvenes (15-24) -> Universidades; adultos (30+) -> IP y CFT; 25-29 muestra transición.</div>
          <p>“La edad tiene una influencia significativa en el tipo de institución que eligen los estudiantes en la región de Magallanes. Los estudiantes más jóvenes, entre 15 y 24 años, suelen ingresar mayoritariamente a universidades tradicionales y del CRUCH. Este grupo etario se caracteriza por tener una preferencia marcada por programas presenciales y jornadas diurnas, lo cual coincide con la etapa vital posterior al egreso de la educación media.</p>
          <p>En cambio, los estudiantes mayores, especialmente quienes superan los 30 años, muestran un patrón diferente: ingresan en mayor proporción a Institutos Profesionales (IP) y Centros de Formación Técnica (CFT). Además, predominan en modalidades vespertinas y ejecutivas debido a que muchos compatibilizan estudio con trabajo y responsabilidades familiares. Las carreras técnicas también resultan más atractivas para este grupo, pues son más cortas y más accesibles económicamente.</p>
          <p>El contexto regional refuerza esta tendencia: Magallanes es una zona donde gran parte de la población adulta trabaja desde temprana edad, por lo que necesitan opciones más flexibles. En síntesis, la edad influye en la institución elegida: los jóvenes optan por universidades y los adultos por CFT/IP.”</p>
        </article>

        <article class="respuesta-card">
          <h3>PREGUNTA 3</h3>
          <div class="respuesta-highlight">Programas cercanos a $5 millones (P90) justifican infraestructura compleja y costos regionales.</div>
          <p>“Sí. El análisis confirma que existen carreras cuyos aranceles están muy por encima del promedio general.</p>
          <p>Mientras el arancel promedio es cercano a $2.7 millones, algunos programas alcanzan valores que bordean los $5 millones, ubicándose dentro del percentil 90 del conjunto de datos. La desviación estándar de más de $1 millón refuerza la idea de que existen programas con costos extraordinariamente elevados.</p>
          <p>Las carreras más costosas se encuentran principalmente en áreas como Salud, Ingeniería, Arquitectura y Tecnología avanzada. Estos programas requieren infraestructura compleja, tales como laboratorios clínicos, talleres especializados, simuladores, equipos industriales y softwares profesionales. A esto se suma la necesidad de docentes altamente calificados, lo cual aumenta considerablemente los costos de operación.</p>
          <p>Además, el contexto geográfico de Magallanes influye: el aislamiento de la región incrementa los costos en materiales, equipamiento y mantención. Junto con esto, algunas carreras profesionalizantes enfrentan procesos de acreditación más exigentes, lo que también eleva el arancel. Por tanto, sí existen carreras sustantivamente más caras, y estas diferencias se explican por factores técnicos, operativos y regionales.”</p>
        </article>
      </div>
    </section>

    <section id="datos">
      <div class="section-heading">
        <span>03 · Datos y visualizaciones</span>
        <h2>Datos para los gráficos</h2>
        <p>Organizamos la información en tablas y en gráficos para mostrar cada evidencia de manera consistente.</p>
      </div>

      <div class="data-toggle" role="tablist">
        <button class="active" data-target="tablas" aria-selected="true">Tablas</button>
        <button data-target="graficos" aria-selected="false">Gráficos</button>
      </div>

      <div class="data-pane tablas active" id="pane-tablas">
        <div class="tabla-wrapper">
          <table>
            <caption>Tabla 1. Arancel promedio por área de conocimiento</caption>
            <thead>
              <tr>
                <th>Área</th>
                <th>Arancel promedio (millones)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Derecho</td><td>4.1</td></tr>
              <tr><td>Salud</td><td>3.9</td></tr>
              <tr><td>Arte y Arquitectura</td><td>3.6</td></tr>
              <tr><td>Ciencias Básicas</td><td>3.3</td></tr>
              <tr><td>Ingeniería y Tecnología</td><td>3.8</td></tr>
              <tr><td>Otras áreas</td><td>2.5</td></tr>
            </tbody>
          </table>
        </div>

        <div class="tabla-wrapper">
          <table>
            <caption>Tabla 2. Tipo de institución según tramo de edad</caption>
            <thead>
              <tr>
                <th>Tramo de edad</th>
                <th>Universidades (%)</th>
                <th>IP (%)</th>
                <th>CFT (%)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>15-24 años</td><td>70</td><td>20</td><td>10</td></tr>
              <tr><td>25-29 años</td><td>50</td><td>30</td><td>20</td></tr>
              <tr><td>30+ años</td><td>20</td><td>40</td><td>40</td></tr>
            </tbody>
          </table>
        </div>

        <div class="tabla-wrapper">
          <table>
            <caption>Tabla 3. Carreras más caras vs promedio general</caption>
            <thead>
              <tr>
                <th>Carrera</th>
                <th>Área</th>
                <th>Arancel (millones)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Medicina</td><td>Salud</td><td>4.9</td></tr>
              <tr><td>Odontología</td><td>Salud</td><td>4.7</td></tr>
              <tr><td>Ingeniería Civil Industrial</td><td>Ingeniería</td><td>4.5</td></tr>
              <tr><td>Arquitectura</td><td>Arte y Arquitectura</td><td>4.3</td></tr>
              <tr><td>Derecho</td><td>Derecho</td><td>4.1</td></tr>
            </tbody>
          </table>
          <p class="footnote">Promedio general regional: 2.7 millones · Percentil 90 (aprox): 4.5 millones</p>
        </div>
      </div>

      <div class="data-pane viz-studio" id="pane-graficos">
        <div class="chart-grid">
          <article class="chart-card">
            <h4>Arancel promedio por área de conocimiento</h4>
            <p>Comparación visual de los aranceles promedio (millones) para cada área.</p>
            <canvas id="chartArancel"></canvas>
          </article>
          <article class="chart-card">
            <h4>Tipo de institución según tramo de edad</h4>
            <p>Participación porcentual de universidades, IP y CFT para cada tramo de edad.</p>
            <canvas id="chartInstitucion"></canvas>
          </article>
          <article class="chart-card">
            <h4>Carreras más caras vs promedio regional</h4>
            <p>Aranceles individuales comparados con el promedio regional de 2.7 millones.</p>
            <canvas id="chartCarreras"></canvas>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer>
    Trabajo de Estadística - Región de Magallanes
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const dataArancelPorArea = [
      { area: "Derecho", promedio: 4.1 },
      { area: "Salud", promedio: 3.9 },
      { area: "Arte y Arquitectura", promedio: 3.6 },
      { area: "Ciencias Básicas", promedio: 3.3 },
      { area: "Ingeniería y Tecnología", promedio: 3.8 },
      { area: "Otras áreas", promedio: 2.5 }
    ];

    const dataInstitucionPorEdad = [
      { tramo: "15-24", universidad: 70, ip: 20, cft: 10 },
      { tramo: "25-29", universidad: 50, ip: 30, cft: 20 },
      { tramo: "30+", universidad: 20, ip: 40, cft: 40 }
    ];

    const dataCarrerasCaras = [
      { carrera: "Medicina", area: "Salud", arancel: 4.9 },
      { carrera: "Odontología", area: "Salud", arancel: 4.7 },
      { carrera: "Ing. Civil Industrial", area: "Ingeniería", arancel: 4.5 },
      { carrera: "Arquitectura", area: "Arte y Arquitectura", arancel: 4.3 },
      { carrera: "Derecho", area: "Derecho", arancel: 4.1 }
    ];

    const toggleButtons = document.querySelectorAll('.data-toggle button');
    const panes = {
      tablas: document.getElementById('pane-tablas'),
      graficos: document.getElementById('pane-graficos')
    };

    toggleButtons.forEach(button => {
      button.addEventListener('click', () => {
        const target = button.dataset.target;
        toggleButtons.forEach(btn => {
          const isActive = btn === button;
          btn.classList.toggle('active', isActive);
          btn.setAttribute('aria-selected', isActive);
        });
        Object.entries(panes).forEach(([key, pane]) => {
          pane.classList.toggle('active', key === target);
        });
      });
    });

    const azul = "#49b4ff";
    const azulMedio = "#7c7dff";
    const azulClaro = "#3bf4ff";

    Chart.defaults.color = "#d6e3ff";
    Chart.defaults.font.family = '"Space Grotesk", "Inter", sans-serif';
    Chart.defaults.font.size = 13;
    Chart.defaults.plugins.legend.labels.usePointStyle = true;
    Chart.defaults.plugins.legend.labels.pointStyle = 'circle';
    Chart.defaults.plugins.legend.labels.padding = 18;

    const chartBackground = {
      id: 'chartBackground',
      beforeDraw(chart) {
        const {ctx, chartArea} = chart;
        if (!chartArea) return;
        ctx.save();
        ctx.fillStyle = 'rgba(6, 10, 20, 0.92)';
        ctx.shadowColor = 'rgba(0,0,0,0.6)';
        ctx.shadowBlur = 35;
        ctx.shadowOffsetY = 18;
        ctx.fillRect(chartArea.left - 16, chartArea.top - 16, chartArea.width + 32, chartArea.height + 32);
        ctx.restore();
      }
    };

    Chart.register(chartBackground);

    const gradientFill = (context, colors) => {
      const {ctx, chartArea} = context.chart;
      if (!chartArea) return colors[0];
      const gradient = ctx.createLinearGradient(chartArea.left, chartArea.bottom, chartArea.left, chartArea.top);
      colors.forEach((color, idx) => {
        gradient.addColorStop(idx / (colors.length - 1), color);
      });
      return gradient;
    };

    new Chart(document.getElementById('chartArancel'), {
      type: 'bar',
      data: {
        labels: dataArancelPorArea.map(item => item.area),
        datasets: [{
          label: 'Arancel promedio (millones)',
          data: dataArancelPorArea.map(item => item.promedio),
          backgroundColor: context => gradientFill(context, ['rgba(73,180,255,0.95)', 'rgba(124,125,255,0.65)']),
          borderColor: 'rgba(255,255,255,0.15)',
          borderWidth: 1,
          borderRadius: 18,
          borderSkipped: false
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: { label: ctx => `${ctx.formattedValue} millones` }
          }
        },
        scales: {
          x: {
            ticks: { color: '#d6e3ff' },
            grid: { display: false }
          },
          y: {
            beginAtZero: true,
            ticks: { color: '#d6e3ff' },
            title: { display: true, text: 'Millones de pesos', color: '#d6e3ff' },
            grid: { color: 'rgba(255,255,255,0.08)' }
          }
        }
      }
    });

    new Chart(document.getElementById('chartInstitucion'), {
      type: 'bar',
      data: {
        labels: dataInstitucionPorEdad.map(item => item.tramo),
        datasets: [
          {
            label: 'Universidades',
            data: dataInstitucionPorEdad.map(item => item.universidad),
            backgroundColor: context => gradientFill(context, [azul, 'rgba(73,180,255,0.45)']),
            borderRadius: 16,
            borderSkipped: false,
            borderColor: 'rgba(255,255,255,0.25)',
            borderWidth: 1,
            barThickness: 42
          },
          {
            label: 'IP',
            data: dataInstitucionPorEdad.map(item => item.ip),
            backgroundColor: context => gradientFill(context, [azulMedio, 'rgba(124,125,255,0.4)']),
            borderRadius: 16,
            borderSkipped: false,
            borderColor: 'rgba(255,255,255,0.2)',
            borderWidth: 1,
            barThickness: 42
          },
          {
            label: 'CFT',
            data: dataInstitucionPorEdad.map(item => item.cft),
            backgroundColor: context => gradientFill(context, [azulClaro, 'rgba(59,244,255,0.45)']),
            borderRadius: 16,
            borderSkipped: false,
            borderColor: 'rgba(255,255,255,0.2)',
            borderWidth: 1,
            barThickness: 42
          }
        ]
      },
      options: {
        responsive: true,
        interaction: { mode: 'index', intersect: false },
        plugins: {
          legend: { position: 'top' }
        },
        scales: {
          x: {
            ticks: { color: '#d6e3ff' },
            grid: { display: false }
          },
          y: {
            beginAtZero: true,
            ticks: {
              color: '#d6e3ff',
              callback: value => `${value}%`
            },
            title: { display: true, text: 'Porcentaje de estudiantes', color: '#d6e3ff' },
            grid: { color: 'rgba(255,255,255,0.08)' }
          }
        }
      }
    });

    new Chart(document.getElementById('chartCarreras'), {
      type: 'bar',
      data: {
        labels: dataCarrerasCaras.map(item => item.carrera),
        datasets: [
          {
            label: 'Arancel (millones)',
            data: dataCarrerasCaras.map(item => item.arancel),
            backgroundColor: context => gradientFill(context, ['rgba(124,125,255,0.9)', 'rgba(73,180,255,0.5)']),
            borderRadius: 18,
            borderSkipped: false,
            borderColor: 'rgba(255,255,255,0.2)',
            borderWidth: 1.2,
            barThickness: 52
          },
          {
            type: 'line',
            label: 'Promedio general: 2.7 millones',
            data: Array(dataCarrerasCaras.length).fill(2.7),
            borderColor: '#ff8b6b',
            borderDash: [6, 6],
            borderWidth: 2,
            pointRadius: 0,
            fill: false
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'top' }
        },
        scales: {
          x: {
            ticks: { color: '#d6e3ff' },
            grid: { display: false }
          },
          y: {
            beginAtZero: true,
            ticks: { color: '#d6e3ff' },
            title: { display: true, text: 'Millones de pesos', color: '#d6e3ff' },
            grid: { color: 'rgba(255,255,255,0.08)' }
          }
        }
      }
    });
  </script>
</body>
</html>
